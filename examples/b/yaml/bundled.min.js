!function(t){!function(n){n.then(function(e){return n=t=void 0,e.config({bundled:!0,proxy:"/node_modules/o/dev/index.js",src:"/node_modules/o/src/b.js",hash:"/examples/b/yaml/services.yaml:main",baseURL:"/node_modules/o/src/",includepath:"node_modules/"}),function(t){return Promise.all([t("/examples/b/yaml/main.js",function(t,n,e){t.exports=function(t,n){return function(){n(t)}}}),t("/examples/b/yaml/print.js",function(t,n,e){t.exports=function(){return function(t){if("undefined"!=typeof document){var n=document.createElement("h1");n.textContent=t,document.body.appendChild(n)}console.log(t)}}}),t("/examples/b/yaml/services.yaml",function(t,n,e){t.exports={"app.print":{callable:"./print"},"app.hello":{object:"../../hello-world"},main:{callable:"./main",arguments:["@app.hello","@app.print"]}}}),t("/examples/hello-world.js",function(t,n,e){t.exports="Hello World!"}),t("/node_modules/@gardenhq/willow/Builder.js",function(t,n,e){var r=function(t,n){this.container=t,this.loading=null,this.import=n,this.clear()};Object.assign(r.prototype,{use:function(t){return"function"==typeof t&&(t=[t]),this.filters=this.filters.concat(t),this},clear:function(){return this.filters=[],this},get:function(t){const n=this.container;var e;return e=null!=this.loading?this.loading.then(function(){return n.get(t)}.bind(this)):n.get(t),e instanceof Promise&&e.catch(function(n){n.message=n.message+"\n @"+t}),e},set:function(t,n){return this.container.set.apply(this.container,arguments),this},has:function(t){return this.container.has.apply(this.container,arguments)},tag:function(){return this.container.tag.apply(this.container,arguments),this},getTagged:function(t){return this.container.getTagged(t)},run:function(t,n){return this.get(t).then(function(t){if("function"==typeof t)return t.apply(null,n)})},build:function(t){return this.loading=this.load.apply(this,arguments).catch(function(t){throw t}),this},applyFilters:function(t,n,e){const r=this,i=typeof t;if(null==t||"object"!==i||t.constructor!=Object&&"imports"!=n)return this.container.set(n,function(){return Promise.resolve(t)}),Promise.resolve(e);if(0==this.filters.length)return Promise.resolve(e);const o=this.filters[0](r,t,n,e);return this.filters.reduce(function(t,i,o,s){return t.then(function(t){e=t||e;const o=i(r,e[n],n,e);return null==o?e:o})},o instanceof Promise?o:Promise.resolve(o))},processKey:function(t,n,e){return this.applyFilters(e[n],n,e).then(function(n){const e=Object.keys(n),r=t+1;return r<e.length?this.processKey(r,e[r],n):n}.bind(this))},_load:function(t){"function"==typeof t&&(t=t(this));var n=function(t){if(null==t||"object"!=typeof t)throw new Error("Service definitions should be an object, a function returning an object (or a !!promise resolving to an object!!)");var n=0;const e=Object.keys(t)[n];return this.processKey(n,e,t).then(function(){return this}.bind(this))};return t instanceof Promise?t.then(n.bind(this)):n.bind(this)(t)},load:function(t){if("string"==typeof t){if("function"!=typeof this.import)throw new Error("This builder doesn't know how to load");return this.import(t).then(function(t){return this._load(t)}.bind(this))}return this._load(t)},getContainer:function(){return this.container}}),t.exports=r}),t("/node_modules/@gardenhq/willow/Container.js",function(t,n,e){var r={isDefined:function(t){return"undefined"!=typeof t},isCallable:function(t){return"function"==typeof t}},i=function(t){this._keys={},this._values={},this._factories=[],this._definitions={},this._tags={},t&&Object.keys(t).forEach(function(n){this.set(n,t[n])},this)};Object.assign(i.prototype,{set:function(t,n,e){if(r.isDefined(this._values[t]))throw new Error('Cannot set "'+t+'", it is already set and has been instantiated');return r.isDefined(this._definitions[t])&&null!==this._definitions[t]&&this.removeTags(t),this._definitions[t]=n,this._keys[t]=!0,null!=e&&e.forEach(function(n,e,r){"string"==typeof n?this.tag(t,n):this.tag(t,n.name,n)},this),this},tag:function(t,n,e){return r.isDefined(this._keys[t])||this.set(t,null),r.isDefined(this._tags[n])||(this._tags[n]={}),r.isDefined(this._tags[n][t])||(this._tags[n][t]=[]),this._tags[n][t].push(e||{}),this},get:function(t){if(!this.has(t))throw new Error('Cannot get "'+t+'", identifier is not defined');return r.isDefined(this._values[t])?this._values[t]:r.isDefined(this._factories[t])?this._factories[t](this,[]):(r.isCallable(this._definitions[t])?this._values[t]=this._definitions[t].apply(this,[]):this._values[t]=this._definitions[t],this._values[t])},has:function(t){return r.isDefined(this._keys[t])},factory:function(t,n){if(!r.isCallable(n))throw new Error('Cannot set "'+t+'", service factories must be callable');return this._factories[t]=n,this._keys[t]=!0,this},removeTags:function(t){this.has(t)&&Object.keys(this._tags).forEach(function(n,e,r){null!=this._tags[n][t]&&delete this._tags[n][t]},this)},findTaggedIds:function(t){return r.isDefined(this._tags[t])?this._tags[t]:{}},getTagged:function(t){var n=this.findTaggedIds(t),e=[];return Object.keys(n).forEach(function(r,i,o){var s=this.get(r),u=n[r].reduce(function(n,e,r,i){return null!=e.name&&e.name==t?e.key:n},i);e[u]=s},this),e}}),t.exports=i}),t("/node_modules/@gardenhq/willow/conf/index.js",function(t,n,e){t.exports=function(){var t="@gardenhq/willow";return{"willow.filter.service":{filter:t+"/filters/service"},"willow.filter.factory":{filter:t+"/filters/factory"},"willow.filter.tags":{filter:t+"/filters/tags"}}}}),t("/node_modules/@gardenhq/willow/conf/javascript.js",function(t,n,e){t.exports=function(){var t="@gardenhq/willow",n="willow";return{"willow.filter.class":{filter:t+"/filters/class",arguments:["@"+n+".loadAndEval","@"+n+".resolve.arguments","@"+n+".resolveIdentifier","@"+n+".traverse"],tags:[n+".filter"]},"willow.filter.object":{filter:t+"/filters/object",arguments:["@"+n+".loadAndEval"],tags:[n+".filter"]},"willow.filter.share":{filter:t+"/filters/shared"},"willow.filter.resolve":{filter:t+"/filters/resolve",arguments:["@"+n+".resolve.resolve"],tags:[n+".filter"]},"willow.filter.iterator":{filter:t+"/filters/iterator",arguments:["@"+n+".resolve.arguments"],tags:[n+".filter"]}}}}),t("/node_modules/@gardenhq/willow/filters/callable.js",function(t,n,e){t.exports=function(t,n){return t("callable",function(t,e,r,i,o,s){return n(o,s).then(function(n){try{var o=r.apply(i,n)}catch(t){e(t)}t(o)})})}}),t("/node_modules/@gardenhq/willow/filters/class.js",function(t,n,e){t.exports=function(t,n,e,r){const i="calls";return t("class",function(t,o,s,u,l,f){return n(l,f).then(function(n){const u=[];(f[i]||[]).forEach(function(t,n,i){const o=t[1]||[];r(o,function(t,n,r){return u.push(e(t,l)),u.length-1})}),Promise.all(u).then(function(e){const o=new(Function.prototype.bind.apply(s,[s].concat(n)));(f[i]||[]).forEach(function(t,n,i){const s=t[0],u=t[1]||[];r(u,function(t,n,r){return e[t]}),o[s].apply(o,u)}),t(o)}).catch(function(t){o(t)})})})}}),t("/node_modules/@gardenhq/willow/filters/factory.js",function(t,n,e){t.exports=function(t){return t=t||"factory",function(n,e,r,i){"undefined"!=typeof e[t]&&n.factory(r,e[t])}}}),t("/node_modules/@gardenhq/willow/filters/filter.js",function(t,n,e){t.exports=function(t,n,e){return e=e||"filter",function(e,r,i,o){t("filter",function(t,e,r,i,o,s){return n(o,s).then(function(n){var e=r.apply(i,n);o.use(e),t(e)}).then(function(t){return t})})(e,r,i,o)}}}),t("/node_modules/@gardenhq/willow/filters/imports.js",function(t,n,e){t.exports=function(t,n){n=n||"imports";const e="resource";return function r(i,o,s,u){return s==n?Promise.all(o.map(function(n){var r=n;return"string"!=typeof r&&(r=n[e]),t(r)})).then(function(t){const e=t.map(function(t){if("function"==typeof t&&(t=t(i)),"object"!=typeof t)throw new Error("That import doesn't return/resolve to an object");return Object.keys(t).forEach(function(e){e!=n&&("undefined"!=typeof u[e]&&u[e].constructor!=Object||(u[e]=Object.assign(t[e],u[e])))}),"undefined"!=typeof t[n]?r(i,t[n],n,u):u});return Promise.all(e).then(function(t){return t[0]})}):Promise.resolve(u)}}}),t("/node_modules/@gardenhq/willow/filters/index.js",function(t,n,e){t.exports=function(t){var n="willow",e="@",r="#",i=":",o=t.get(n+".system.import"),s=t.get(n+".system.registerDynamic");return Promise.all(["/filters/util/loader","/filters/util/walkPath","/filters/util/resolveIdentifier","/filters/util/traverse","/filters/util/resolver","/filters/util/splitIdentifier","/filters/util/findIdentifier","/filters/imports","/filters/callable","/filters/filter"].map(function(t){return"@gardenhq/"+n+t}).map(function(t){return o(t)})).then(function(u){var l=u[0],f=u[1],c=u[2],a=u[3],h=u[4],d=u[5](i),p=u[6](e),g=u[7],m=u[8],v=u[9],w=l(o,s,f,d,p),y=c(f,e,r,d),b=h(y,a),j=b("arguments"),_=g(o),x=m(w,j),O=v(w,j);return t.set(n+".loadAndEval",function(){return w}),t.set(n+".require",function(){return o}),t.set(n+".walkPath",function(){return f}),t.set(n+".resolveIdentifier",function(){return y}),t.set(n+".resolver",function(){return b}),t.set(n+".traverse",function(){return a}),t.set(n+".resolve.arguments",function(){return j}),t.set(n+".filter.callable",function(){return x}),function(t,n,e,r){return _.apply(null,arguments).then(function(n){return r=n||r,x(t,r[e],e,r),O(t,r[e],e,r),r})}})}}),t("/node_modules/@gardenhq/willow/filters/iterator.js",function(t,n,e){t.exports=function(t,n){return n=n||"iterator",function(e,r,i,o){"undefined"!=typeof r[n]&&e.set(i,function(){return t(e,r).then(function(t){return e.get(r[n].substr(1)).then(function(n){var e=t[0],r=Object.keys(e).map(function(t,r,i){return n(e[t],t)});return r})})})}}}),t("/node_modules/@gardenhq/willow/filters/object.js",function(t,n,e){t.exports=function(t){return t("object",function(t,n,e,r,i,o){t(e)})}}),t("/node_modules/@gardenhq/willow/filters/resolve.js",function(t,n,e){t.exports=function(t,n,e,r){return n=n||"resolve",e=e||"service",r=r||"@",function(i,o,s,u){if(null!=o[n]){const u=o[e],l=function(){var e=this;let i=o[n].filter(function(t,n,e){return 0===t.indexOf(r)});return t(e,o).then(function(t){const n=e.get.bind(e);return i=i.map(function(n,i,o){return e.has(n)||e.set(n,function(n){return t[i]}),n.substr(r.length)}),e.get=function(t){return i.indexOf(t)!==-1&&(t=r+t),n(t)},new Promise(function(t,n){try{t(u.apply(e,i.map(function(t){return e.get(t)})))}catch(t){n(t)}})})};o[e]=null,i.set(s,l)}}}}),t("/node_modules/@gardenhq/willow/filters/service.js",function(t,n,e){t.exports=function(t){return t=t||"service",function(n,e,r,i){"undefined"!=typeof e[t]&&n.set(r,e[t])}}}),t("/node_modules/@gardenhq/willow/filters/tags.js",function(t,n,e){t.exports=function(t){return t=t||"tags",function(n,e,r,i){(e[t]||[]).forEach(function(t,e,i){var o=t,s={};"string"!=typeof o&&(o=t.name,s=t),n.tag(r,o,s)})}}}),t("/node_modules/@gardenhq/willow/filters/util/findIdentifier.js",function(t,n,e){t.exports=function(t){return t=t||"@",function(n){var e=n.file.indexOf("/")==-1&&0===n.file.indexOf(t);return!!e&&n.file.substr(1)}}}),t("/node_modules/@gardenhq/willow/filters/util/loader.js",function(t,n,e){t.exports=function(t,n,e,r,i){var o="requires",s="bundle";return function(u,l){return null==t?function(){}:function(f,c,a,h){if(null!=c[u]){const h=function(){var a=this;return new Promise(function(h,d){var p,g=r(c[u]),m=i(g);if(m)p=a.get(m),p instanceof Promise||(p=Promise.resolve(p));else{if(c[s]===!1){var v=g.file.split("#"),w={"Cache-Control":"private"};v[1]&&(w["Content-Type"]=v[1]),g.file=v[0]+"#"+JSON.stringify({"Cache-Control":"private"})}const e=c[o]||[];p=Promise.all(e.map(function(t){return a.get("require."+t)})).then(function(r){return e.forEach(function(t,e,i){n(t,[],!0,function(t){return r[e]})}),t(g.file)})}p.then(function(t){var n;return null!=g.path&&(n=t,t=e(g.path,t)),l(h,d,t,n,f,c)}).catch(function(t){d(t)})})};f.set(a,h)}}}}}),t("/node_modules/@gardenhq/willow/filters/util/resolveIdentifier.js",function(t,n,e){function r(t,n,e){var r,i=t.split(":",2);if(2==i.length){if(r=n.env[i[0]],"function"==typeof r&&(r=r()),"+"==i[1][0])r=r?i[1].substring(1):"";else if("-"==i[1][0])r=r||i[1].substring(1);else if("#"==i[1][0])r=void 0!==r?String(r).length:0;else if("="==i[1][0])r||(r=i[1].substring(1),n.env[i[0]]=r);else if("?"==i[1][0]&&!r)throw i[1].length>1?new Error:new Error}else r=n.env[t],"function"==typeof r&&(r=r());return r}function i(t,n,e,o,s){if(n!=-1&&t){var u=t.indexOf("$",n);if(u==-1)return e+=t.substring(n),n=-1,e;var l,f;if(e+=t.substring(n,u),"{"==t.charAt(u+1)){if(f=t.indexOf("}",u),f==-1){if(!o.ignoreErrors)throw new Error;l=t.substring(u+2)}else l=t.substring(u+2,f),f++;l||(e+="${}")}else{if(u++,f=-1,o.specialVars&&o.specialVars.indexOf(t[u])!=-1)l=t[u],f=u+1;else{for(var c=u,a=t.length;c<a;c++){var h=t.charCodeAt(c);if(!(h>47&&h<58||h>64&&h<91||95===h||h>96&&h<123)){f=c;break}}l=f==-1?t.substring(u):t.substring(u,f)}l||(e+="$")}return n=f,l?r(l,o,function(r,u){return r&&!o.ignoreErrors?s(r):(null!==u&&void 0!==u&&(e+=String(u)),void i(t,n,e,o,s))}):i(t,n,e,o,s)}return e}t.exports=function(t,n,e,r){const o="$";return function(s,u){if("string"!=typeof s)return s;if(0===s.indexOf(n)){const e=u.get(s.substr(n.length)),i=r(s);return i.path?t(i.path,e):e}if(0===s.indexOf(e)){const t=u.getTagged(s.substr(e.length));if(0===t.length)return Promise.resolve([]);const n=[],r=Object.keys(t);return r.forEach(function(e,r,i){n.push(t[e])}),Promise.all(n).then(function(t){var n={};return 0==r[0]&&(n=[]),t.forEach(function(t,e,i){n[r[e]]=t}),n})}return 0===s.indexOf(o)?i(s,"",0,process):s}}}),t("/node_modules/@gardenhq/willow/filters/util/resolver.js",function(t,n,e){t.exports=function(t,n){return function(e){return e=e||"arguments",function(r,i){if(null==i[e])return Promise.resolve();const o=[];return n(i[e],function(n,e,i){return o.push(t(n,r)),o.length-1}),Promise.all(o).then(function(t){return n(i[e],function(n,e,r){return t[n]}),i[e]})}}}}),t("/node_modules/@gardenhq/willow/filters/util/splitIdentifier.js",function(t,n,e){t.exports=function(t){return t=t||":",function(n){var e=n.lastIndexOf(t),r=n.indexOf("://");if(e!==-1){var i=n.split(t);return r!==-1?{file:i[0]+":"+i[1],path:i[2]}:{file:i[0],path:i[1]}}return{file:n,path:null}}}}),t("/node_modules/@gardenhq/willow/filters/util/traverse.js",function(t,n,e){t.exports=function t(n,e,r){r=r||[],Object.keys(n).forEach(function(i){var o=n[i];null!=o&&Object.getPrototypeOf(o)===Object.prototype?t(o,e,r.concat(i)):n[i]=e.call(n,o,i,r)})}}),t("/node_modules/@gardenhq/willow/filters/util/walkPath.js",function(t,n,e){t.exports=function(t,n){return t.split(".").reduce(function(t,n,e,r){return t[n]},n)}}),t("/node_modules/@gardenhq/willow/index.js",function(t,n,e){t.exports=function(t,n,r,i){const o="@gardenhq/willow",s="willow.";if(r=o+"/conf/javascript",null==t){var u=e("./util/promised");t=u(function(t){return e(t.replace(o,"./"))})}const l=["Builder","filters/","conf/"];return null==i&&l.push("Container"),Promise.all(l.map(function(n){return t(o+"/"+n)})).then(function(e){const o=null==i?new e[3]:i,u=new e[0](o,t);return u.set(s+"system.import",function(){return t},["dom.system.import"]),u.set(s+"system.registerDynamic",function(){return n}),e[1](u).then(function(t){return u.use(t).set(s+"resolve.resolve",function(){return u.get(s+"resolver")("resolve")})}).then(function(t){var n=e[2]();return t.load(n).then(function(){return Promise.all(Object.keys(n).map(function(n,e,r){return t.get(n)})).then(function(n){return t})})}).then(function(t){return t.load(r)}).then(function(t){return Promise.all(t.getTagged(s+"filter")).then(function(){return t})})})}}),t("/node_modules/@gardenhq/willow/util/promised.js",function(t,n,e){t.exports=function(t){return function(){try{var n=t.apply(null,arguments);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}}}),t("/node_modules/o/src/b.js",function(t,n,e){t.exports=function(t){return t.then(function(t){var n;return null!=t.registerDynamic&&(n=t.registerDynamic.bind(t)),t.import("@gardenhq/willow/index.js").then(function(e){return e(t,n,"@gardenhq/willow/conf/javascript")}).then(function(n){var e=t.getConfig(),r=e.hash;if(!r&&"undefined"!=typeof document){var i=document.getElementsByTagName("script"),o=i[i.length-1];if(o.hasAttribute("src")){var s=o.getAttribute("src"),u=s.split("#");u.length>1&&(r=t.resolve(u[1],location.pathname))}}if(r){var u=r.split(":");return e.basepath||t.config({baseURL:u[0]}),n.build(u[0]).run(u[1]||"main")}return n})})}})])}(function(t,n){return e.registerDynamic(t,[],!0,n)}).then(function(){e.import("/node_modules/o/src/b.js").then(function(t){"function"==typeof t&&t(Promise.resolve(e))})})})}(t(function(t){return t(document)}))}(function(t){return function(n){var e=function(t,n){if("/"===t[0]&&(t=t.slice(1)),"."!==t[0])return t;n=n.filter(function(t){return"."!=t});for(var e=t.split("/");"."===e[0]||".."===e[0];)".."===e.shift()&&n.pop();return n.concat(e).join("/")},r=function(t,n){return function(r,i){if(r.indexOf("//")!==-1)return r;i=i||n;var o=r.substr(0,2),s=o[0],u=r.split("#"),l=2==u.length?"#"+u[1]:"";return r=u[0],".."!=o&&"./"!=o&&"/"!=s&&(r.indexOf("/")===-1&&(r+="/"),r=t+r),"/"===r[r.length-1]&&(r+="index"),r=e(r,i.split("/").slice(0,-1)),r.indexOf(".")===-1&&(r+=".js"),s=r.charAt(0),"/"!=s&&(r="/"+r),r+l}},i={},o=function(n,e,r){this.id=n,this.filename=n,this.parent=e,this.exports={},this[t]=r},s=o.prototype;s._load=function(n){if("undefined"!=typeof this[t]){var e=this.filename.split("/");e.pop();var r=this[t];this[t]=void 0,r.bind(null)(this,this.exports,n,this.filename,e.join("/"))}return this.exports};var u=function(t){try{return i[u.resolve(t.split("#")[0])]._load(u)}catch(n){throw console.error(t),n}},l={},s=Object.assign(function(t){return Promise.resolve(u(t))},{registerDynamic:function(t,n,e,r){i[t]=new o(t,null,r)},import:function(t){return this.apply(null,arguments)},getConfig:function(){return Object.assign({},l)},config:function(t){t.baseURL!==l.baseURL&&(this.resolve=u.resolve=r(t.includepath,t.baseURL)),l=Object.assign({},l,t)}});return Promise.resolve(s)}}("__"));