!function(t){!function(n){n.then(function(e){return n=t=void 0,e.config({bundled:!0,proxy:"/node_modules/@gardenhq/o/dev/index.js",src:"/node_modules/@gardenhq/o/src/b.js",hash:"/examples/b/yaml/services.yaml:main",baseURL:"/node_modules/@gardenhq/o/src/",includepath:"node_modules/"}),function(t){return Promise.all([t("/examples/b/yaml/main.js",function(t,n,e,i,r,o){t.exports=function(t,n){return function(){n(t)}}}),t("/examples/b/yaml/print.js",function(t,n,e,i,r,o){t.exports=function(){return function(t){if("undefined"!=typeof document){var n=document.createElement("h1");n.textContent=t,document.body.appendChild(n)}console.log(t)}}}),t("/examples/b/yaml/services.yaml",function(t,n,e,i,r,o){t.exports={"app.print":{callable:"./print"},"app.hello":{object:"../../hello-world"},main:{callable:"./main",arguments:["@app.hello","@app.print"]}}}),t("/examples/hello-world.js",function(t,n,e,i,r,o){t.exports="Hello World!"}),t("/node_modules/@gardenhq/o/src/b.js",function(t,n,e,i,r,o){t.exports=function(t){return t.then(function(t){var n;return null!=t.registerDynamic&&(n=t.registerDynamic.bind(t)),t.import("@gardenhq/willow/index.js").then(function(e){return e(t.import.bind(t),n,"@gardenhq/willow/conf/javascript")}).then(function(n){var e=t.getConfig(),i=e.hash;if(!i&&"undefined"!=typeof document){var r=document.getElementsByTagName("script"),o=r[r.length-1];o.hasAttribute("src")&&(s=o.getAttribute("src").split("#")).length>1&&(i=t.resolve(s[1],location.pathname))}if(i){var s=i.split(":");return e.basepath||t.config({baseURL:s[0]}),n.build(s[0]).run(s[1]||"main")}return n})})}}),t("/node_modules/@gardenhq/willow/Builder.js",function(t,n,e,i,r,o){var s=function(t,n){this.container=t,this.loading=null,this.import=n,this.clear()};Object.assign(s.prototype,{use:function(t){return"function"==typeof t&&(t=[t]),this.filters=this.filters.concat(t),this},clear:function(){return this.filters=[],this},get:function(t){const n=this.container;var e;return(e=null!=this.loading?this.loading.then(function(){return n.get(t)}.bind(this)):n.get(t))instanceof Promise&&e.catch(function(n){n.message=n.message+"\n @"+t}),e},set:function(t,n){return this.container.set.apply(this.container,arguments),this},has:function(t){return this.container.has.apply(this.container,arguments)},tag:function(){return this.container.tag.apply(this.container,arguments),this},getTagged:function(t){return this.container.getTagged(t)},run:function(t,n){return this.get(t).then(function(t){if("function"==typeof t)return t.apply(null,n)})},build:function(t){return this.loading=this.load.apply(this,arguments).catch(function(t){throw t}),this},applyFilters:function(t,n,e){const i=this,r=typeof t;if(null==t||"object"!==r||t.constructor!=Object&&"imports"!=n)return this.container.set(n,function(){return Promise.resolve(t)}),Promise.resolve(e);if(0==this.filters.length)return Promise.resolve(e);const o=this.filters[0](i,t,n,e);return this.filters.reduce(function(t,r,o,s){return t.then(function(t){const o=r(i,(e=t||e)[n],n,e);return null==o?e:o})},o instanceof Promise?o:Promise.resolve(o))},processKey:function(t,n,e){return this.applyFilters(e[n],n,e).then(function(n){const e=Object.keys(n),i=t+1;return i<e.length?this.processKey(i,e[i],n):n}.bind(this))},_load:function(t){"function"==typeof t&&(t=t(this));var n=function(t){if(null==t||"object"!=typeof t)throw new Error("Service definitions should be an object, a function returning an object (or a !!promise resolving to an object!!)");const n=Object.keys(t)[0];return this.processKey(0,n,t).then(function(){return this}.bind(this))};return t instanceof Promise?t.then(n.bind(this)):n.bind(this)(t)},load:function(t){if("string"==typeof t){if("function"!=typeof this.import)throw new Error("This builder doesn't know how to load");return this.import(t).then(function(t){return this._load(t)}.bind(this))}return this._load(t)},getContainer:function(){return this.container}}),t.exports=s}),t("/node_modules/@gardenhq/willow/Container.js",function(t,n,e,i,r,o){var s={isDefined:function(t){return void 0!==t},isCallable:function(t){return"function"==typeof t}},u=function(t){this._keys={},this._values={},this._factories=[],this._definitions={},this._tags={},t&&Object.keys(t).forEach(function(n){this.set(n,t[n])},this)};Object.assign(u.prototype,{set:function(t,n,e){if(s.isDefined(this._values[t]))throw new Error('Cannot set "'+t+'", it is already set and has been instantiated');return s.isDefined(this._definitions[t])&&null!==this._definitions[t]&&this.removeTags(t),this._definitions[t]=n,this._keys[t]=!0,null!=e&&e.forEach(function(n,e,i){"string"==typeof n?this.tag(t,n):this.tag(t,n.name,n)},this),this},tag:function(t,n,e){return s.isDefined(this._keys[t])||this.set(t,null),s.isDefined(this._tags[n])||(this._tags[n]={}),s.isDefined(this._tags[n][t])||(this._tags[n][t]=[]),this._tags[n][t].push(e||{}),this},get:function(t){if(!this.has(t))throw new Error('Cannot get "'+t+'", identifier is not defined');return s.isDefined(this._values[t])?this._values[t]:s.isDefined(this._factories[t])?this._factories[t](this,[]):(s.isCallable(this._definitions[t])?this._values[t]=this._definitions[t].apply(this,[]):this._values[t]=this._definitions[t],this._values[t])},has:function(t){return s.isDefined(this._keys[t])},factory:function(t,n){if(!s.isCallable(n))throw new Error('Cannot set "'+t+'", service factories must be callable');return this._factories[t]=n,this._keys[t]=!0,this},removeTags:function(t){this.has(t)&&Object.keys(this._tags).forEach(function(n,e,i){null!=this._tags[n][t]&&delete this._tags[n][t]},this)},findTaggedIds:function(t){return s.isDefined(this._tags[t])?this._tags[t]:{}},getTagged:function(t){var n=this.findTaggedIds(t),e=[];return Object.keys(n).forEach(function(i,r,o){var s=this.get(i),u=n[i].reduce(function(n,e,i,r){return null!=e.name&&e.name==t?e.key:n},r);e[u]=s},this),e}}),t.exports=u}),t("/node_modules/@gardenhq/willow/conf/../filters/class.js",function(t,n,e,i,r,o){t.exports=function(t,n,e,i){return t("class",function(t,r,o,s,u,l){return n(u,l).then(function(n){const s=[];(l.calls||[]).forEach(function(t,n,r){const o=t[1]||[];i(o,function(t,n,i){return s.push(e(t,u)),s.length-1})}),Promise.all(s).then(function(e){const r=new(Function.prototype.bind.apply(o,[o].concat(n)));(l.calls||[]).forEach(function(t,n,o){const s=t[0],u=t[1]||[];i(u,function(t,n,i){return e[t]}),r[s].apply(r,u)}),t(r)}).catch(function(t){r(t)})})})}}),t("/node_modules/@gardenhq/willow/conf/../filters/factory.js",function(t,n,e,i,r,o){t.exports=function(t){return t=t||"factory",function(n,e,i,r){void 0!==e[t]&&n.factory(i,e[t])}}}),t("/node_modules/@gardenhq/willow/conf/../filters/iterator.js",function(t,n,e,i,r,o){t.exports=function(t,n){return n=n||"iterator",function(e,i,r,o){void 0!==i[n]&&e.set(r,function(){return t(e,i).then(function(t){return e.get(i[n].substr(1)).then(function(n){var e=t[0],i=Object.keys(e).map(function(t,i,r){return n(e[t],t)});return i})})})}}}),t("/node_modules/@gardenhq/willow/conf/../filters/object.js",function(t,n,e,i,r,o){t.exports=function(t){return t("object",function(t,n,e,i,r,o){t(e)})}}),t("/node_modules/@gardenhq/willow/conf/../filters/resolve.js",function(t,n,e,i,r,o){t.exports=function(t,n,e,i){return n=n||"resolve",e=e||"service",i=i||"@",function(r,o,s,u){if(null!=o[n]){const u=o[e],l=function(){var e=this;let r=o[n].filter(function(t,n,e){return 0===t.indexOf(i)});return t(e,o).then(function(t){const n=e.get.bind(e);return r=r.map(function(n,r,o){return e.has(n)||e.set(n,function(n){return t[r]}),n.substr(i.length)}),e.get=function(t){return-1!==r.indexOf(t)&&(t=i+t),n(t)},new Promise(function(t,n){try{t(u.apply(e,r.map(function(t){return e.get(t)})))}catch(t){n(t)}})})};o[e]=null,r.set(s,l)}}}}),t("/node_modules/@gardenhq/willow/conf/../filters/service.js",function(t,n,e,i,r,o){t.exports=function(t){return t=t||"service",function(n,e,i,r){void 0!==e[t]&&n.set(i,e[t])}}}),t("/node_modules/@gardenhq/willow/conf/../filters/tags.js",function(t,n,e,i,r,o){t.exports=function(t){return t=t||"tags",function(n,e,i,r){(e[t]||[]).forEach(function(t,e,r){var o=t,s={};"string"!=typeof o&&(o=t.name,s=t),n.tag(i,o,s)})}}}),t("/node_modules/@gardenhq/willow/conf/index.js",function(t,n,e,i,r,o){t.exports=function(){var t=r+"/..";return{"willow.filter.service":{filter:t+"/filters/service"},"willow.filter.factory":{filter:t+"/filters/factory"},"willow.filter.tags":{filter:t+"/filters/tags"}}}}),t("/node_modules/@gardenhq/willow/conf/javascript.js",function(t,n,e,i,r,o){t.exports=function(){var t=r+"/..",n="willow";return{"willow.filter.class":{filter:t+"/filters/class",arguments:["@willow.loadAndEval","@willow.resolve.arguments","@willow.resolveIdentifier","@willow.traverse"],tags:[n+".filter"]},"willow.filter.object":{filter:t+"/filters/object",arguments:["@willow.loadAndEval"],tags:[n+".filter"]},"willow.filter.share":{filter:t+"/filters/shared"},"willow.filter.resolve":{filter:t+"/filters/resolve",arguments:["@willow.resolve.resolve"],tags:[n+".filter"]},"willow.filter.iterator":{filter:t+"/filters/iterator",arguments:["@willow.resolve.arguments"],tags:[n+".filter"]}}}}),t("/node_modules/@gardenhq/willow/filters/callable.js",function(t,n,e,i,r,o){t.exports=function(t,n){return t("callable",function(t,e,i,r,o,s){return n(o,s).then(function(n){try{var o=i.apply(r,n)}catch(t){e(t)}t(o)})})}}),t("/node_modules/@gardenhq/willow/filters/filter.js",function(t,n,e,i,r,o){t.exports=function(t,n,e){return e=e||"filter",function(e,i,r,o){t("filter",function(t,e,i,r,o,s){return n(o,s).then(function(n){var e=i.apply(r,n);o.use(e),t(e)})})(e,i,r,o)}}}),t("/node_modules/@gardenhq/willow/filters/imports.js",function(t,n,e,i,r,o){t.exports=function(t,n){n=n||"imports";return function e(i,r,o,s){return o==n?Promise.all(r.map(function(n){var e=n;return"string"!=typeof e&&(e=n.resource),t(e,n.version)})).then(function(t){var r=t.map(function(t){if("function"==typeof t&&(t=t(i)),"object"!=typeof t)throw new Error("That import doesn't return/resolve to an object");return Object.keys(t).forEach(function(e){e!=n&&(void 0!==s[e]&&s[e].constructor!=Object||(s[e]=Object.assign(t[e],s[e])))}),void 0!==t[n]?e(i,t[n],n,s):s});return Promise.all(r).then(function(t){return t[0]})}):Promise.resolve(s)}}}),t("/node_modules/@gardenhq/willow/filters/index.js",function(t,n,e,i,r,o){t.exports=function(t){var n="willow",e=t.get(n+".system.import"),i=t.get(n+".system.registerDynamic");return Promise.all(["/util/loader.js","/util/walkPath.js","/util/resolveIdentifier.js","/util/traverse.js","/util/resolver.js","/util/splitIdentifier.js","/util/findIdentifier.js","/util/weblikeJavascriptlessImport.js","/imports.js","/callable.js","/filter.js"].map(function(t){return r+t}).map(function(t){return e(t)})).then(function(r){var o=r[0],s=r[1],u=r[2],l=r[3],f=r[4],c=r[5](":"),a=r[6]("@"),h=r[7](e),d=r[8],p=r[9],g=r[10],m=o(h,i,s,c,a),v=u(s,"@","#",c),w=f(v,l),b=w("arguments"),y=d(h),j=p(m,b),_=g(m,b);return t.set(n+".loadAndEval",function(){return m}),t.set(n+".require",function(){return e}),t.set(n+".walkPath",function(){return s}),t.set(n+".resolveIdentifier",function(){return v}),t.set(n+".resolver",function(){return w}),t.set(n+".traverse",function(){return l}),t.set(n+".resolve.arguments",function(){return b}),t.set(n+".filter.callable",function(){return j}),function(t,n,e,i){return y.apply(null,arguments).then(function(n){return i=n||i,j(t,i[e],e,i),_(t,i[e],e,i),i})}})}}),t("/node_modules/@gardenhq/willow/filters/util/findIdentifier.js",function(t,n,e,i,r,o){t.exports=function(t){return t=t||"@",function(n){return!(-1!=n.file.indexOf("/")||0!==n.file.indexOf(t))&&n.file.substr(1)}}}),t("/node_modules/@gardenhq/willow/filters/util/loader.js",function(t,n,e,i,r,o){t.exports=function(t,n,e,i,r){return function(o,s){return null==t?function(){}:function(u,l,f,c){if(null!=l[o]){const c=function(){var f=this;return new Promise(function(c,a){var h,d=i(l[o]),p=r(d);if(p)(h=f.get(p))instanceof Promise||(h=Promise.resolve(h));else{if(!1===l.bundle){var g=d.file.split("#"),m={"Cache-Control":"private"};g[1]&&(m["Content-Type"]=g[1]),d.file=g[0]+"#"+JSON.stringify({"Cache-Control":"private"})}var v=l.requires||[];h=Promise.all(v.map(function(t){return f.get("require."+t)})).then(function(e){return v.forEach(function(t,i,r){n(t,[],!0,function(t){return e[i]})}),t(d.file,l.version)})}h.then(function(t){var n;return null!=d.path&&(n=t,t=e(d.path,t)),s(c,a,t,n,u,l)}).catch(function(t){a(t)})})};u.set(f,c)}}}}}),t("/node_modules/@gardenhq/willow/filters/util/resolveIdentifier.js",function(t,n,e,i,r,o){function s(t,n,e){var i,r=t.split(":",2);if(2==r.length){if("function"==typeof(i=n.env[r[0]])&&(i=i()),"+"==r[1][0])i=i?r[1].substring(1):"";else if("-"==r[1][0])i=i||r[1].substring(1);else if("#"==r[1][0])i=void 0!==i?String(i).length:0;else if("="==r[1][0])i||(i=r[1].substring(1),n.env[r[0]]=i);else if("?"==r[1][0]&&!i)throw r[1].length,new Error}else"function"==typeof(i=n.env[t])&&(i=i());return i}function u(t,n,e,i,r){if(-1!=n&&t){var o=t.indexOf("$",n);if(-1==o)return e+=t.substring(n),n=-1,e;var l,f;if(e+=t.substring(n,o),"{"==t.charAt(o+1)){if(-1==(f=t.indexOf("}",o))){if(!i.ignoreErrors)throw new Error;l=t.substring(o+2)}else l=t.substring(o+2,f),f++;l||(e+="${}")}else{if(o++,f=-1,i.specialVars&&-1!=i.specialVars.indexOf(t[o]))l=t[o],f=o+1;else{for(var c=o,a=t.length;c<a;c++){var h=t.charCodeAt(c);if(!(h>47&&h<58||h>64&&h<91||95===h||h>96&&h<123)){f=c;break}}l=-1==f?t.substring(o):t.substring(o,f)}l||(e+="$")}return n=f,l?s(l,i,function(o,s){if(o&&!i.ignoreErrors)return r(o);null!==s&&void 0!==s&&(e+=String(s)),u(t,n,e,i,r)}):u(t,n,e,i,r)}return e}t.exports=function(t,n,e,i){return function(r,s){if("string"!=typeof r)return r;if(0===r.indexOf(n)){const e=s.get(r.substr(n.length)),o=i(r);return o.path?t(o.path,e):e}if(0===r.indexOf(e)){const t=s.getTagged(r.substr(e.length));if(0===t.length)return Promise.resolve([]);const n=[],i=Object.keys(t);return i.forEach(function(e,i,r){n.push(t[e])}),Promise.all(n).then(function(t){var n={};return 0==i[0]&&(n=[]),t.forEach(function(t,e,r){n[i[e]]=t}),n})}return 0===r.indexOf("$")?u(r,"",0,o):r}}}),t("/node_modules/@gardenhq/willow/filters/util/resolver.js",function(t,n,e,i,r,o){t.exports=function(t,n){return function(e){return e=e||"arguments",function(i,r){if(null==r[e])return Promise.resolve();const o=[];return n(r[e],function(n,e,r){return o.push(t(n,i)),o.length-1}),Promise.all(o).then(function(t){return n(r[e],function(n,e,i){return t[n]}),r[e]})}}}}),t("/node_modules/@gardenhq/willow/filters/util/splitIdentifier.js",function(t,n,e,i,r,o){t.exports=function(t){return t=t||":",function(n){var e=n.lastIndexOf(t),i=n.indexOf("://");if(-1!==e){var r=n.split(t);return-1!==i?{file:r[0]+":"+r[1],path:r[2]}:{file:r[0],path:r[1]}}return{file:n,path:null}}}}),t("/node_modules/@gardenhq/willow/filters/util/traverse.js",function(t,n,e,i,r,o){t.exports=function t(n,e,i){i=i||[],Object.keys(n).forEach(function(r){var o=n[r];null!=o&&Object.getPrototypeOf(o)===Object.prototype?t(o,e,i.concat(r)):n[r]=e.call(n,o,r,i)})}}),t("/node_modules/@gardenhq/willow/filters/util/walkPath.js",function(t,n,e,i,r,o){t.exports=function(t,n){return t.split(".").reduce(function(t,n,e,i){return t[n]},n)}}),t("/node_modules/@gardenhq/willow/filters/util/weblikeJavascriptlessImport.js",function(t,n,e,i,r,o){t.exports=function(t){return function(n){if("/"===n[n.length-1])n+="index.js";else{var e=n.split("/"),i=1;0===n.indexOf("@")&&(i=2),e.length>i&&-1===e.pop().indexOf(".")&&(n+=".js")}return t.apply(null,arguments)}}}),t("/node_modules/@gardenhq/willow/index.js",function(t,n,e,i,r,o){t.exports=function(t,n,i,o){var s=r,u="willow.";if(i=s+"/conf/javascript.js",null==t){var l=e("./util/promised");t=l(function(t){return e(t.replace(s,"./"))})}var f=["Builder.js","filters/index.js","conf/index.js"];return null==o&&f.push("Container.js"),Promise.all(f.map(function(n){return t(s+"/"+n)})).then(function(e){var r=null==o?new e[3]:o,s=new e[0](r,t);return s.set(u+"system.import",function(){return t},["dom.system.import"]),s.set(u+"system.registerDynamic",function(){return n}),e[1](s).then(function(t){return s.use(t).set(u+"resolve.resolve",function(){return s.get(u+"resolver")("resolve")})}).then(function(t){var n=e[2]();return t.load(n).then(function(){return Promise.all(Object.keys(n).map(function(n,e,i){return t.get(n)})).then(function(n){return t})})}).then(function(t){return t.load(i)}).then(function(t){return Promise.all(t.getTagged(u+"filter")).then(function(){return t})})})}})])}(function(t,n){return e.registerDynamic(t,[],!0,n)}).then(function(){e.import("/node_modules/@gardenhq/o/src/b.js").then(function(t){"function"==typeof t&&t(Promise.resolve(e))})})})}(t(function(t){return t(document)}))}(function(t){return function(t){var n=function(t,n){if("/"===t[0]&&(t=t.slice(1)),"."!==t[0])return t;n=n.filter(function(t){return"."!=t});for(var e=t.split("/");"."===e[0]||".."===e[0];)".."===e.shift()&&n.pop();return n.concat(e).join("/")},e=function(t,e){return function(i,r){if(-1!==i.indexOf("//"))return i;r=r||e;var o=i.substr(0,2),s=o[0],u=i.split("#"),l=2==u.length?"#"+u[1]:"";return i=u[0],".."!=o&&"./"!=o&&"/"!=s&&(-1===i.indexOf("/")&&(i+="/"),i=t+i),"/"===i[i.length-1]&&(i+="index"),-1===(i=n(i,r.split("/").slice(0,-1))).indexOf(".")&&(i+=".js"),"/"!=(s=i.charAt(0))&&(i="/"+i),i+l}},i={},r={env:{},argv:""},o=function(t,n,e){this.id=t,this.filename=t,this.parent=n,this.exports={},this.__=e};(l=o.prototype)._load=function(t){if(void 0!==this.__){var n=this.filename.split("/");n.pop();var e=this.__;this.__=void 0,e.bind(null)(this,this.exports,t,this.filename,n.join("/"),r)}return this.exports};var s=function(t){t=s.resolve(t.split("#")[0]);var n=function(n){return s(0===n.indexOf("/")?n:s.resolve(n,t))};try{return i[t]._load(n)}catch(n){throw console.error(t),n}},u={},l=Object.assign(function(t){return Promise.resolve(s(t))},{registerDynamic:function(t,n,e,r){i[t]=new o(t,null,r)},import:function(t){return this.apply(null,arguments)},getConfig:function(){return Object.assign({},u)},config:function(t){t.baseURL!==u.baseURL&&(this.resolve=s.resolve=e(t.includepath,t.baseURL)),u=Object.assign({},u,t)}});return Promise.resolve(l)}}());